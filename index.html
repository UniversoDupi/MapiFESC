<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MapiFESC</title>
  <link rel="icon" type="image/png" href="./icon.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.288); /* Oscurecimiento elegante */
      z-index: 5;
      display: none;
    }

    /* Aparece cuando se activa el menú */
    .overlay.active {
      display: block;
    }

    .croquis-container {
      position: relative;
      width: 90%; /* Amplía el ancho al 90% del viewport */
      height: 80vh; /* Amplía el alto al 80% del viewport */
      max-width: 1200px; /* Permite que se extienda más el ancho */
      margin: auto;
      overflow: hidden; /* Evita que el contenido salga del área visible */
    }

    .croquis-img {
      width: 100%;
      display: block;
    }

    .LogoUNAM-img:hover {
      cursor: pointer;
      transform: scale(1.05);
      transition: transform 0.2s ease;
    }

    .btn-purple {
      background-color: #6f42c1;
      color: white;
      border-color: #6f42c1;
    }

    .btn-purple:hover {
      background-color: #5a3791;
    }

    .btn-pink {
      background-color: #c142ac;
      color: white;
      border-color: #c14290;
    }

    .btn-pink:hover {
      background-color: #913773;
    }

    p {
      color: white;
    }

    .navbar {
      background-image: linear-gradient(to right, #6b3f0c, #7a7419);
      padding: 10px 20px;
      position: relative;
    }

    .hamburger {
      font-size: 30px;
      color: white;
      cursor: pointer;
      z-index: 2;
      position: relative;
    }

    .nav-links {
      list-style: none;
      margin: 0;
      padding: 0;
      position: fixed;
      top: 0;
      left: 0; 
      height: 100vh;
      width: 220px;
      background-color: #333;

      transform: translateX(-100%); 
      transition: transform 0.3s ease-in-out;

      display: flex;
      flex-direction: column;
      padding-top: 60px;

      z-index: 10;
      opacity: 1;
      pointer-events: auto;
      box-shadow: 2px 0 6px rgba(0,0,0,0.4); 
    }

    .nav-links.show {
      transform: translateX(0); 
      opacity: 1;
      pointer-events: auto;
    }

    .nav-links li a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
    }

    .azul {
      background-image: linear-gradient(to right, #4b6cff, #19237a);
    }
    .azul:hover{
      background-image: linear-gradient(to right, #2c3f96, #0e1341);
    }

    .cyan {
      background-image: linear-gradient(to right, #00cad8, #053b3d);
    }
    .cyan:hover{
      background-image: linear-gradient(to right, #0fa59e, #002b2b);
    }

    .cafe {
      background-image: linear-gradient(to right, #ff8827, #6d4307);
    }
    .cafe:hover{
      background-image: linear-gradient(to right, #ad6500, #301f00);
    }

    .rosa {
      background-image: linear-gradient(to right, #ff79c7, #ca009e);
    }
    .rosa:hover{
      background-image: linear-gradient(to right, #880071, #3b0025);
    }

    .verde {
      background-image: linear-gradient(to right, #69ff4b, #217a19);
    }
    .verde:hover{
      background-image: linear-gradient(to right, #2c962c, #12410e);
    }

    .morado {
      background-image: linear-gradient(to right, #cc4bff, #5e197a);
    }
    .morado:hover{
      background-image: linear-gradient(to right, #7d2c96, #330e41);
    }

    .verdecl {
      background-image: linear-gradient(to right, #ff848e, #99001a);
    }
    .verdecl:hover{
      background-image: linear-gradient(to right, #ce0924, #2b0009);
    }

    .amarillo {
      background-image: linear-gradient(to right, #d8ca00, #797100);
    }
    .amarillo:hover{
      background-image: linear-gradient(to right, #b19913, #343500);
    }

    /* Responsividad para orientación vertical */
    @media (orientation: portrait) {
      .hotspot-btn {
        position: absolute;
        transform: translate(-50%, -50%);
        padding: .25px .5px;
        font-size: 2px;
      }

      .Mapi-img {
        position: absolute;
        top: 1vh;
        left: 29vw;
        width: 42vw;
        max-width: 200px;
      }

      .LogoUNAM-img {
        position: absolute;
        width: 11vw;
        max-width: 45px;  
      }

      .fesc-enlace {
        position: absolute;
        top: 1vh;
        left: 87vw;
        width: 11vw;
        max-width: 50px;
        min-width: 10px;
        z-index: 10;
        display: block;
      }

      #btn1 { bottom: 25%; left: 50%; }
      #btn2 { bottom: 35%; left: 50%; }
      #btn3 { bottom: 45%; left: 50%; }
    }

    /* Responsividad para orientación horizontal */
    @media (orientation: landscape) {
      .hotspot-btn {
        position: absolute;
        transform: translate(-50%, -50%);
        padding: 1px 2px;
        font-size: 5px;
      }

      .Mapi-img {
        position: absolute;
        top: 0vh;
        left: 42vw;
        width: 20vw;
        max-width: 200px;
      }

      .LogoUNAM-img {
        position: absolute;
        width: 8vw;
        max-width: 45px;  
      }

      .fesc-enlace {
        position: absolute;
        top: 0.5vh;
        left: 93vw;
        width: 20vw;
        max-width: 50px;
        min-width: 10px;
        z-index: 10;
        display: block;
      }

      #btn1 { bottom: 18%; left: 50%; }
      #btn2 { bottom: 28%; left: 55%; }
      #btn3 { bottom: 37%; left: 51%; }
    }

  </style>
  <!-- Librería Panzoom -->
  <script src="https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js"></script>
</head>
<body class="bg-dark">
  <nav class="navbar">
    <img src="./MapiFESC.png" class="Mapi-img" alt="MapiFESC">
    <a href="https://www.cuautitlan.unam.mx/" class="fesc-enlace">
      <img src="./logoFESC.png" class="LogoUNAM-img" alt="LogoFESC">
    </a>
    
    <div class="hamburger" id="hamburger">&#9776;</div>
      <ul class="nav-links" id="navLinks">
        <p><strong><i>Escoge la zona para ubicarla en el mapa</i></strong></p>
        <nav class="azul">
          <li><a href="#admcon" id="ZoomAdm">Administración y Contabilidad</a></li>
        </nav>
        <nav class="cyan">
          <li><a href="#info" id="ZoomInf">Informática</a></li>
        </nav>
        <nav class="cafe">
          <li><a href="#inge" id="ZoomIng">Ingenierías</a></li>
        </nav>
        <nav class="rosa">
          <li><a href="#vet" id="ZoomVet">Veterinaria</a></li>
        </nav>
        <nav class="verde">
          <li><a href="#agri" id="ZoomAgr">Agrícola</a></li>
        </nav>
        <nav class="morado">
          <li><a href="#expl" id="ZoomExp">Explanada Principal</a></li>
        </nav>
        <nav class="verdecl">
          <li><a href="#depo" id="ZoomDep">Zona Deportiva</a></li>
        </nav>
        <nav class="amarillo">
          <li><a href="#tall" id="ZoomTal">Zona de Talleres</a></li>
        </nav>        
        <button class="close-btn" id="closeMenu">Volver</button>
      </ul>
  </nav>
  <div class="overlay" id="overlay"></div>
  
  <div class="container py-2 text-center">
    <button id="resetZoom">Restablecer vista</button>
    <div class="croquis-container" id="croquis">
      <div id="zoomArea">
        <img src="./CroquisEscalado.jpeg" class="croquis-img" alt="Croquis">
        <button id="btn1" class="btn btn-danger hotspot-btn" data-bs-toggle="modal" data-bs-target="#videoModal" data-video="./CapturasFESC/Otros/Torniquetes.mp4">Torniquetes</button>
        <button id="btn2" class="btn btn-primary hotspot-btn" data-bs-toggle="modal" data-bs-target="#videoModal" data-video="./CapturasFESC/Otros/Letras.mp4">Letras</button>
        <button id="btn3" class="btn btn-success hotspot-btn" data-bs-toggle="modal" data-bs-target="#videoModal" data-video="./CapturasFESC/Otros/EntradaCI.mp4">Entrada CIFESC</button>
      </div>
    </div>

    <footer>
      <p>&copy; 2025 Creado por Mauricio Muciño Villegas, José Antonio Mancilla Acevedo, Roberto Emilio Robledo Guadalupe, Jairo Jair Moreno Romero. Todos los derechos reservados.</p>
    </footer>
  </div>

  <div class="modal fade" id="videoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header">
          <h5 class="modal-title">Zona Seleccionada</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="ratio ratio-16x9">
            <video id="modalVideo" controls>
              <source src="" type="video/mp4">
              Tu navegador no soporta videos HTML5.
            </video>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  const hamburger = document.getElementById('hamburger');
  const navLinks = document.getElementById('navLinks');
  const overlay = document.getElementById('overlay');
  const closeBtn = document.getElementById('closeMenu');

  // Abrir y cerrar menú
  hamburger.addEventListener('click', () => {
    navLinks.classList.add('show');
    overlay.classList.add('active');
  });

  closeBtn.addEventListener('click', () => {
    navLinks.classList.remove('show');
    overlay.classList.remove('active');
  });

  overlay.addEventListener('click', () => {
    navLinks.classList.remove('show');
    overlay.classList.remove('active');
  });

  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      navLinks.classList.remove('show');
      overlay.classList.remove('active');
    });
  });

  // Configura Panzoom sobre el contenedor completo (imagen + botones)
  const zoomArea = document.getElementById('zoomArea'); // Asegúrate de agregar este div en el HTML
  const panzoomInstance = Panzoom(zoomArea, {
    maxScale: 3,
    minScale: 1,
    startScale: 1,
  });

  // Permite hacer zoom con la rueda del ratón
  zoomArea.parentElement.addEventListener('wheel', panzoomInstance.zoomWithWheel);

  // Botón para resetear zoom
  const resetButton = document.getElementById('resetZoom');
  resetButton.addEventListener('click', () => {
    panzoomInstance.reset();
  });

  // Modal de video
  const videoModal = document.getElementById('videoModal');
  const modalVideo = document.getElementById('modalVideo');

  videoModal.addEventListener('show.bs.modal', function (event) {
    const button = event.relatedTarget;
    const videoSrc = button.getAttribute('data-video');
    modalVideo.querySelector('source').src = videoSrc;
    modalVideo.load();
    modalVideo.play();
  });

  videoModal.addEventListener('hidden.bs.modal', function () {
    modalVideo.pause();
    modalVideo.currentTime = 0;
  });

  function zoomRelativoSinPan(relX, relY, scale = 2, panXRel = 0, panYRel = 0) {
    const zoomArea = document.getElementById('zoomArea');
    const zoomRect = zoomArea.getBoundingClientRect();

    const focalX = zoomRect.width * relX;
    const focalY = zoomRect.height * relY;

    panzoomInstance.zoom(scale, {
      focal: { x: focalX, y: focalY },
      animate: true
    });
    
    const panX = zoomRect.width * panXRel;
    const panY = zoomRect.height * panYRel;
    // Paneo (ajusta estos valores según necesites centrar la zona)
    panzoomInstance.pan(panX, panY, { animate: true });
  }

  document.getElementById('ZoomAdm').addEventListener('click', (e) => {
    e.preventDefault();
    zoomRelativoSinPan(0.40, 0.50, 3, 0.04, -0.01); // coordenadas relativas de la zona de Administración
  });

</script>
</body>
</html>
